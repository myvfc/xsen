<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pete ‚Äî XSEN Cowboys Chat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background: #f0f0f0; color: #222; }
    a { text-decoration: none; }
    .chat-container { width: 100%; max-width: 480px; margin: 16px auto; border: 1px solid #111; border-radius: 10px; background: #fff; display: flex; flex-direction: column; min-height: calc(100vh - 32px); }
    .chat-header { display: flex; align-items: center; gap: 10px; background: #FF6600; color: #FFFFFF; padding: 12px 14px; font-weight: 600; border-radius: 10px 10px 0 0; }
    .header-logo-link { display: flex; align-items: center; }
    .header-logo { height: 32px; max-width: 120px; width: auto; object-fit: contain; cursor: pointer; }
    .header-title { font-size: 16px; font-weight: 700; white-space: nowrap; color: #FFFFFF; }
    #manageSubBtn { margin-left: auto; background: none; border: 1px solid rgba(255,255,255,0.5); color: #FFFFFF; padding: 6px 12px; border-radius: 6px; font-size: 11px; cursor: pointer; margin-right: 10px; white-space: nowrap; }
    #manageSubBtn:hover { background: rgba(255,255,255,0.15); }
    .live-badge { font-size: 12px; font-weight: 800; padding: 5px 10px; border-radius: 999px; white-space: nowrap; border: 1px solid rgba(255,255,255,0.4); transition: all 0.25s ease; }
    .live-badge.live { background: #ff2d2d; color: #fff; box-shadow: 0 0 8px rgba(255,45,45,0.8); }
    .live-badge.offline { background: #666; color: #eee; }
    .live-cta { display: flex; justify-content: center; gap: 12px; margin: 12px; }
    .live-cta button { flex: 1; padding: 10px 14px; font-size: 14px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; transition: opacity 0.2s; }
    .live-cta button:hover { opacity: 0.85; }
    #listenLiveBtn { background: #FF6600; color: #FFFFFF; }
    #donateBtn { background: #ffd54f; color: #111; }
    #xsen-audio-card { margin: 0 12px 12px; background: #1a1a1a; border-radius: 10px; padding: 12px; }
    .xsen-audio-header { color: #ff2d2d; font-weight: 700; font-size: 13px; margin-bottom: 8px; }
    #xsenAudio { width: 100%; height: 36px; }
    .xsen-audio-status { color: #aaa; font-size: 12px; margin-top: 6px; text-align: center; }
    .fan-message-panel { margin: 0 12px 12px; padding: 16px; background: #fff; border-radius: 14px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); }
    .fan-message-header { display: flex; justify-content: center; align-items: center; gap: 6px; font-weight: 800; font-size: 15px; color: #FF6600; margin-bottom: 14px; padding-bottom: 8px; border-bottom: 2px solid #f0e0e0; }
    .fan-message-panel input, .fan-message-panel textarea { width: 100%; margin: 8px 0; padding: 9px 11px; font-size: 14px; border-radius: 8px; border: 1px solid #ddd; font-family: inherit; }
    .fan-message-panel input:focus, .fan-message-panel textarea:focus { outline: none; border-color: #FF6600; }
    #sendFanMessage { width: 100%; margin-top: 10px; padding: 11px; background: #FF6600; color: #FFFFFF; border: none; border-radius: 8px; font-size: 14px; font-weight: 700; cursor: pointer; transition: opacity 0.2s; }
    #sendFanMessage:hover { opacity: 0.9; }
    .fan-message-status { text-align: center; font-size: 13px; margin-top: 8px; min-height: 16px; color: #666; }
    .chat-messages { flex: 1; padding: 16px; overflow-y: auto; background: #fdfdfd; min-height: 300px; }
    .message { margin-bottom: 12px; padding: 10px 14px; border-radius: 10px; max-width: 85%; line-height: 1.5; font-size: 14px; }
    .message.bot { background: #f0f0f0; color: #222; }
    .message.user { background: #FF6600; color: #FFFFFF; margin-left: auto; }
    .message.video { padding: 6px; background: transparent; max-width: 100%; }
    .message.video iframe { max-width: 100%; border-radius: 10px; box-shadow: 0 6px 18px rgba(0,0,0,0.25); }
    .chat-input { display: flex; border-top: 1px solid #ddd; background: #fff; border-radius: 0 0 10px 10px; }
    .chat-input input { flex: 1; padding: 14px; border: none; font-size: 1rem; font-family: inherit; background: transparent; }
    .chat-input input:focus { outline: none; }
    .chat-input button { background: #FF6600; color: #FFFFFF; border: none; padding: 0 20px; font-size: 1.2rem; cursor: pointer; border-radius: 0 0 10px 0; transition: opacity 0.2s; }
    .chat-input button:hover { opacity: 0.9; }
    .nav-bar { display: flex; justify-content: space-around; padding: 10px; border-top: 1px solid #eee; background: #fafafa; border-radius: 0 0 10px 10px; }
    .nav-bar a { font-size: 12px; color: #FF6600; opacity: 0.7; transition: opacity 0.2s; }
    .nav-bar a:hover { opacity: 1; }
    /* ‚îÄ‚îÄ PAYWALL ‚îÄ‚îÄ */
    #paywallCard { display: none; margin: 12px; padding: 20px; background: #fff8e1; border: 2px solid #FF6600; border-radius: 14px; text-align: center; }
    #paywallCard h3 { color: #FF6600; font-size: 17px; margin-bottom: 8px; }
    #paywallCard p { font-size: 13px; color: #555; margin-bottom: 14px; }
    .trial-btn { display: block; background: #FF6600; color: #FFFFFF; padding: 12px; border-radius: 8px; font-weight: 700; font-size: 15px; margin-bottom: 12px; }
    .trial-btn:hover { opacity: 0.9; }
    .divider { font-size: 12px; color: #999; margin-bottom: 12px; }
    #activateForm input { width: 100%; padding: 9px 11px; font-size: 14px; border-radius: 8px; border: 1px solid #ddd; font-family: inherit; margin-bottom: 8px; }
    #activateForm input:focus { outline: none; border-color: #FF6600; }
    #activateBtn { width: 100%; padding: 10px; background: #555; color: #fff; border: none; border-radius: 8px; font-size: 14px; font-weight: 700; cursor: pointer; }
    #activateBtn:hover { background: #333; }
    #activateStatus { font-size: 12px; color: #666; margin-top: 6px; min-height: 16px; }
    @media (max-width: 520px) {
      .chat-container { margin: 0; border-radius: 0; border: none; min-height: 100vh; }
      .chat-header { border-radius: 0; }
      .chat-input button { border-radius: 0; }
      .nav-bar { border-radius: 0; }
    }

    /* ‚îÄ‚îÄ NIL NOTIFICATION CSS ‚îÄ‚îÄ */
    #nil-prompt-container {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 999;
      padding: 0 16px 16px;
      pointer-events: none;
    }

    .nil-prompt {
      pointer-events: all;
      background: #111111;
      border: 1px solid rgba(201,168,76,0.6);
      border-radius: 10px;
      overflow: hidden;
      max-width: 480px;
      margin: 0 auto;
      box-shadow:
        0 0 0 1px rgba(201,168,76,0.15),
        0 30px 80px rgba(0,0,0,0.8),
        0 0 60px rgba(132,22,23,0.3);
      animation: nilSlideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    .nil-prompt-exit {
      animation: nilSlideDown 0.4s ease forwards !important;
    }

    @keyframes nilSlideUp {
      from { opacity: 0; transform: translateY(100%); }
      to   { opacity: 1; transform: translateY(0); }
    }

    @keyframes nilSlideDown {
      from { opacity: 1; transform: translateY(0); }
      to   { opacity: 0; transform: translateY(100%); }
    }

    .nil-prompt-accent {
      height: 4px;
      background: linear-gradient(90deg, #FF6600, #c9a84c, #FF6600);
      background-size: 200% 100%;
      animation: accentShimmer 2s linear infinite;
    }

    @keyframes accentShimmer {
      0%   { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    .nil-prompt-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
      padding: 22px 24px;
      flex-wrap: wrap;
    }

    .nil-prompt-tag {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 2.5px;
      text-transform: uppercase;
      color: #c9a84c;
      margin-bottom: 8px;
    }

    .nil-dot {
      width: 8px;
      height: 8px;
      background: #ff4444;
      border-radius: 50%;
      animation: nilPulse 1s infinite;
      flex-shrink: 0;
    }

    @keyframes nilPulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50%       { opacity: 0.4; transform: scale(1.4); }
    }

    .nil-prompt-message {
      font-size: 22px;
      font-weight: 700;
      color: #f5f5f0;
      margin-bottom: 6px;
      line-height: 1.2;
    }

    .nil-prompt-sub {
      font-size: 11px;
      color: rgba(245,245,240,0.35);
      letter-spacing: 0.3px;
    }

    .nil-prompt-right {
      display: flex;
      align-items: center;
      gap: 14px;
      flex-shrink: 0;
    }

    .nil-prompt-btn {
      background: #FF6600;
      color: #f5f5f0;
      padding: 14px 28px;
      border-radius: 5px;
      text-decoration: none;
      font-weight: 700;
      font-size: 15px;
      white-space: nowrap;
      transition: all 0.2s;
      box-shadow: 0 4px 20px rgba(132,22,23,0.5);
    }

    .nil-prompt-btn:hover {
      background: #9a1c1d;
      transform: translateY(-1px);
      box-shadow: 0 8px 30px rgba(132,22,23,0.7);
    }

    .nil-prompt-dismiss {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 50%;
      width: 32px;
      height: 32px;
      color: rgba(245,245,240,0.4);
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .nil-prompt-dismiss:hover {
      background: rgba(255,255,255,0.1);
      color: #f5f5f0;
    }

    .nil-prompt-progress {
      height: 4px;
      background: rgba(255,255,255,0.04);
    }

    .nil-prompt-progress-fill {
      height: 100%;
      width: 100%;
      background: linear-gradient(90deg, #FF6600, #c9a84c);
      border-radius: 0 2px 2px 0;
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <header class="chat-header">
      <a href="https://xsen.fun/okstate" class="header-logo-link" target="_blank" rel="noopener">
        <img src="https://raw.githubusercontent.com/myvfc/xsen-images/main/Cowboy%20Bot%20logo.png" alt="XSEN Cowboys" class="header-logo" />
      </a>
      <span class="header-title">ü§† Pete</span>
      <button id="manageSubBtn" type="button">‚öôÔ∏è Account</button>
      <span id="liveBadge" class="live-badge offline">‚ö™ OFFLINE</span>
    </header>

    <div class="live-cta">
      <button id="listenLiveBtn" type="button">üî¥ Listen Live</button>
      <button id="donateBtn" type="button">‚ù§Ô∏è Donate</button>
    </div>

    <div id="xsen-audio-card" style="display:none;">
      <div class="xsen-audio-header">üî¥ LIVE FAN CAST</div>
      <audio id="xsenAudio" preload="none" playsinline controls>
        <source src="" type="audio/mpeg" />
        Your browser does not support audio.
      </audio>
      <div id="audioStatus" class="xsen-audio-status">Tap ‚ñ∂ to listen live</div>
    </div>

    <div class="fan-message-panel">
      <div class="fan-message-header">üì£ Message the Broadcaster</div>
      <input type="text" id="fanName" placeholder="Your name (optional)" />
      <textarea id="fanMessage" rows="3" placeholder="Send a message to the broadcaster‚Ä¶"></textarea>
      <button id="sendFanMessage" type="button">Send Message</button>
      <div id="fanMessageStatus" class="fan-message-status"></div>
    </div>

    <!-- PAYWALL CARD -->
    <div id="paywallCard">
      <h3>üèà You've used your 5 free messages!</h3>
      <p>Start your 3-day free trial to keep chatting with Pete ‚Äî no charge today.</p>
      <a href="https://buy.stripe.com/eVq00jc8Ce3D1aua1hbjW03" class="trial-btn">üöÄ Start Free Trial</a>
      <div class="divider">‚Äî Already signed up? Activate below ‚Äî</div>
      <div id="activateForm">
        <input type="email" id="activateEmail" placeholder="Enter your email to activate" />
        <button id="activateBtn" type="button">Activate Access</button>
        <div id="activateStatus"></div>
      </div>
    </div>

    <div id="messages" class="chat-messages">
      <div class="message bot">
        üëã Pistol Pete's here! Ask me anything about OSU Cowboys sports ‚Äî history, stats, highlights, schedules, or players.
      </div>
    </div>

    <form id="chatForm" class="chat-input">
      <input type="text" id="userInput" placeholder="Ask Pete‚Ä¶" autocomplete="off" required />
      <button type="submit">‚û§</button>
    </form>

    <div class="nav-bar">
      <a href="https://xsen.fun/okstate">‚Üê Channel Home</a>
      <a href="https://xsen.fun">XSEN Network</a>
      <a href="https://buy.stripe.com/eVq7sLegK1gRaL4a1hbjW01">Subscribe</a>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    window.supabase = window.supabase.createClient(
      'https://hvqzrdlbtfezwuveincs.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh2cXpyZGxidGZlend1dmVpbmNzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyOTA1MTgsImV4cCI6MjA3ODg2NjUxOH0.30_fdpT1hu_m3zyf-8IywXWIozjIDnqv5RHs6T9hCTo'
    );
  </script>
  <script>
    const ORCHESTRATOR_URL  = 'https://glorious-appreciation-production.up.railway.app';
    const CHAT_API_URL      = 'https://glorious-appreciation-production.up.railway.app/chat';
    const AUTH_SERVICE_URL  = 'https://energetic-joy-production.up.railway.app';
    const FAN_MESSAGE_API   = 'https://xsen-fan-messages-production.up.railway.app/fan-message';
    const LIVE_STATUS_URL   = 'https://xsen-fan-messages-production.up.railway.app/live-status';
    const LIVE_AUDIO_STREAM = 'https://a12.asurahosting.com/listen/xsen_radio/radio.mp3';
    const DONATE_URL        = 'https://thebotosphere.com';
    const FREE_MESSAGE_LIMIT = 5;

    function isAuthenticated() { return !!localStorage.getItem('xsen_auth_token'); }
    function getMessageCount() { return parseInt(localStorage.getItem('xsen_message_count') || '0'); }
    function incrementMessageCount() { const c = getMessageCount() + 1; localStorage.setItem('xsen_message_count', c); return c; }
    function resetMessageCount() { localStorage.setItem('xsen_message_count', '0'); }

    async function activateWithEmail(email) {
      const res = await fetch(`${AUTH_SERVICE_URL}/api/exchange-email`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email: email.trim().toLowerCase() })
      });
      const data = await res.json();
      if (data.token) {
        localStorage.setItem('xsen_auth_token', data.token);
        localStorage.setItem('xsen_user_email', data.email);
        resetMessageCount();
        return true;
      }
      return false;
    }

    async function getUserId() {
      try {
        const token = localStorage.getItem('xsen_auth_token');
        if (token) {
          const payload = JSON.parse(atob(token.split('.')[1]));
          if (payload.email || payload.sub) return payload.email || payload.sub;
        }
      } catch (e) {}
      try {
        const { data: { session } } = await window.supabase.auth.getSession();
        if (session?.user) return session.user.email || session.user.id;
      } catch (e) {}
      return 'anonymous';
    }

    document.addEventListener('DOMContentLoaded', async () => {
      const form           = document.getElementById('chatForm');
      const input          = document.getElementById('userInput');
      const messages       = document.getElementById('messages');
      const liveBadge      = document.getElementById('liveBadge');
      const audioCard      = document.getElementById('xsen-audio-card');
      const audioEl        = document.getElementById('xsenAudio');
      const audioStatus    = document.getElementById('audioStatus');
      const listenLiveBtn  = document.getElementById('listenLiveBtn');
      const donateBtn      = document.getElementById('donateBtn');
      const fanNameInput   = document.getElementById('fanName');
      const fanMsgInput    = document.getElementById('fanMessage');
      const sendFanMsgBtn  = document.getElementById('sendFanMessage');
      const fanMsgStatus   = document.getElementById('fanMessageStatus');
      const manageSubBtn   = document.getElementById('manageSubBtn');
      const paywallCard    = document.getElementById('paywallCard');
      const activateEmail  = document.getElementById('activateEmail');
      const activateBtn    = document.getElementById('activateBtn');
      const activateStatus = document.getElementById('activateStatus');
      let firstVideoPlayed = false;

      function checkPaywall() {
        if (!isAuthenticated() && getMessageCount() >= FREE_MESSAGE_LIMIT) {
          paywallCard.style.display = 'block';
          form.style.display = 'none';
        }
      }

      checkPaywall();

      activateBtn?.addEventListener('click', async () => {
        const email = activateEmail?.value.trim();
        if (!email) { activateStatus.textContent = 'Please enter your email.'; return; }
        activateStatus.textContent = 'Activating‚Ä¶';
        try {
          const success = await activateWithEmail(email);
          if (success) {
            activateStatus.textContent = '‚úÖ Access activated!';
            paywallCard.style.display = 'none';
            form.style.display = 'flex';
            addMsg('üèà Welcome back! You now have full access. Go Pokes!', 'bot');
          } else {
            activateStatus.textContent = '‚ùå Email not found. Please check or start a free trial.';
          }
        } catch (err) {
          activateStatus.textContent = '‚ùå Could not activate. Please try again.';
        }
      });

      manageSubBtn?.addEventListener('click', async () => {
        const token = localStorage.getItem('xsen_auth_token');
        if (!token) { window.location.href = 'https://xsen.fun/okstate'; return; }
        try {
          const res  = await fetch(`${ORCHESTRATOR_URL}/api/create-portal-session`, {
            method: 'POST',
            headers: { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' }
          });
          const data = await res.json();
          if (data.url) window.location.href = data.url;
        } catch (e) { alert('Could not open account management. Please try again.'); }
      });

      form?.addEventListener('submit', async (e) => {
        e.preventDefault();
        const text = input.value.trim();
        if (!text) return;

        if (!isAuthenticated()) {
          const count = incrementMessageCount();
          if (count > FREE_MESSAGE_LIMIT) { checkPaywall(); return; }
        }

        addMsg(text, 'user');
        input.value = '';
        const thinking = addMsg('ü§† Pete is thinking‚Ä¶', 'bot');

        try {
          const userId = await getUserId();
          const res = await fetch(CHAT_API_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ message: text, school: 'okstate', userId })
          });
          if (!res.ok) throw new Error(`HTTP ${res.status}`);
          const data = await res.json();
          thinking.remove();
          if (!data?.response) { addMsg("Go Pokes! I didn't catch that ‚Äî try again.", 'bot'); return; }
          renderResponse(data.response);
          if (!isAuthenticated() && getMessageCount() >= FREE_MESSAGE_LIMIT) {
            setTimeout(() => checkPaywall(), 1000);
          }
        } catch (err) {
          console.error('Chat error:', err);
          thinking.remove();
          addMsg("Sorry, Cowboy ‚Äî couldn't reach Pete right now.", 'bot');
        }
      });

      function renderResponse(text) {
        firstVideoPlayed = false;
        text.split('\n').forEach(line => {
          const t = line.trim();
          if (!t) return;
          if (/^(play|listen|start).*(radio|audio|broadcast|fan cast)/i.test(t)) { addMsg('üîä Starting live fan cast‚Ä¶', 'bot'); playAudio(); return; }
          const m = t.match(/(https:\/\/player\.xsen\.fun\?v=[A-Za-z0-9_-]+)/i);
          if (m) { const title = t.replace(m[1], '').trim(); if (title) addMsg(title, 'bot'); addVideo(m[1]); }
          else { addMsg(t, 'bot'); }
        });
      }

      function addMsg(text, sender) {
        const div = document.createElement('div');
        div.className = `message ${sender}`;
        div.innerHTML = text.replace(/(https?:\/\/[^\s]+)/g, '<a href="$1" target="_blank" rel="noopener" style="color:#0066cc;text-decoration:underline;">$1</a>');
        messages.appendChild(div);
        messages.scrollTop = messages.scrollHeight;
        return div;
      }

      function addVideo(url) {
        const wrap = document.createElement('div');
        wrap.className = 'message bot video';
        const iframe = document.createElement('iframe');
        const src = new URL(url);
        if (!firstVideoPlayed) { src.searchParams.set('autoplay', '1'); src.searchParams.set('muted', '1'); src.searchParams.set('playsinline', '1'); }
        iframe.src = src.toString(); iframe.width = '150%'; iframe.height = '300';
        iframe.allow = 'autoplay; encrypted-media; picture-in-picture';
        iframe.allowFullscreen = true; iframe.loading = 'lazy';
        iframe.style.cssText = 'border:none; border-radius:10px;';
        wrap.appendChild(iframe); messages.appendChild(wrap);
        messages.scrollTop = messages.scrollHeight;
        firstVideoPlayed = true;
      }

      function playAudio() {
        if (!audioEl || !audioCard) return;
        audioCard.style.display = 'block';
        audioEl.src = `${LIVE_AUDIO_STREAM}?ts=${Date.now()}`;
        audioEl.play().then(() => { if (audioStatus) audioStatus.textContent = 'üîä Live fan cast playing'; }).catch(() => { if (audioStatus) audioStatus.textContent = 'Tap ‚ñ∂ to start audio'; });
      }

      listenLiveBtn?.addEventListener('click', () => { addMsg('üî¥ Connecting you to the live fan cast‚Ä¶', 'bot'); playAudio(); });
      donateBtn?.addEventListener('click', () => { addMsg('‚ù§Ô∏è Supporting NIL helps keep the fan cast alive. Thank you!', 'bot'); window.open(DONATE_URL, '_blank', 'noopener'); });

      sendFanMsgBtn?.addEventListener('click', async (e) => {
        e.preventDefault();
        const name = fanNameInput?.value.trim();
        const message = fanMsgInput?.value.trim();
        if (!message) { fanMsgStatus.textContent = 'Please enter a message.'; return; }
        fanMsgStatus.textContent = 'Sending‚Ä¶';
        try {
          const res = await fetch(FAN_MESSAGE_API, { method: 'POST', body: new URLSearchParams({ name: name || 'Anonymous Fan', message, source: 'Pete Live' }) });
          if (!res.ok) throw new Error('Send failed');
          fanMsgStatus.textContent = '‚úÖ Message sent to the broadcaster!';
          fanMsgInput.value = '';
        } catch (err) { fanMsgStatus.textContent = '‚ùå Could not send message.'; }
      });

      async function updateLiveStatus() {
        if (!liveBadge) return;
        try {
          const res = await fetch(LIVE_STATUS_URL, { cache: 'no-store' });
          const data = await res.json();
          if (data.isLive) { liveBadge.textContent = 'üî¥ LIVE'; liveBadge.className = 'live-badge live'; }
          else { liveBadge.textContent = '‚ö™ OFFLINE'; liveBadge.className = 'live-badge offline'; }
        } catch (e) { console.warn('Live status check failed:', e); }
      }

      updateLiveStatus();
      setInterval(updateLiveStatus, 20000);
    });
  </script>

  <!-- NIL Notifications -->
  <div id="nil-prompt-container"></div>
  </div>
  <script src="/xsen-nil-notifications.js"></script>

</body>
</html>


