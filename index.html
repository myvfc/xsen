<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>eXperience Sports & Entertainment Network</title>

<script>
/* ===========================================================
   ESPN MULTI-SPORT OU SCORE TICKER ‚Äî 72 HOUR HISTORY
   Supports: FB, MBB, WBB, Softball, Baseball, Soccer, Volleyball, Wrestling
   =========================================================== */

async function fetchESPN(url) {
  try {
    const res = await fetch(url);
    return await res.json();
  } catch {
    return null;
  }
}

// Extract team + score safely
function extractTeamScore(game, teamIndex) {
  try {
    return {
      name: game.competitors[teamIndex].team.shortDisplayName,
      score: game.competitors[teamIndex].score
    };
  } catch {
    return { name: "?", score: "?" };
  }
}

// Convert emoji per sport
function getSportEmoji(url) {
  if (url.includes("football")) return "üèà";
  if (url.includes("mens")) return "üèÄ";
  if (url.includes("womens-college-basketball")) return "üèÄ";
  if (url.includes("softball")) return "ü•é";
  if (url.includes("baseball")) return "‚öæ";
  if (url.includes("soccer")) return "‚öΩ";
  if (url.includes("volleyball")) return "üèê";
  if (url.includes("wrestling")) return "ü§º‚Äç‚ôÇÔ∏è";
  return "üéØ";
}

// Pull games for TODAY + last 72 hours
async function loadSport(sportUrl, searchName) {
  const results = [];

  // Generate date list (today, yesterday, 2 days ago)
  const dates = [];
  for (let i = 0; i < 3; i++) {
    let d = new Date();
    d.setDate(d.getDate() - i);
    const y = d.getFullYear();
    const m = String(d.getMonth() + 1).padStart(2, "0");
    const day = String(d.getDate()).padStart(2, "0");
    dates.push(`${y}${m}${day}`);
  }

  for (const date of dates) {
    const data = await fetchESPN(`${sportUrl}?dates=${date}`);
    if (data?.events) {
      data.events.forEach(event => {
        if (event.shortName.includes(searchName)) {
          const g = event.competitions[0];
          const t1 = extractTeamScore(g, 0);
          const t2 = extractTeamScore(g, 1);
          const emoji = getSportEmoji(sportUrl);
          results.push(
            `${emoji} ${t1.name} ${t1.score} ‚Äî ${t2.score} ${t2.name}`
          );
        }
      });
    }
  }
  return results;
}

// Master loader for all OU sports
async function loadScores() {
  let tickerItems = [];

  const sports = [
    "https://site.api.espn.com/apis/site/v2/sports/football/college-football/scoreboard",
    "https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/scoreboard",
    "https://site.api.espn.com/apis/site/v2/sports/basketball/womens-college-basketball/scoreboard",
    "https://site.api.espn.com/apis/site/v2/sports/softball/college-softball/scoreboard",
    "https://site.api.espn.com/apis/site/v2/sports/baseball/college-baseball/scoreboard",
    "https://site.api.espn.com/apis/site/v2/sports/soccer/womens-college-soccer/scoreboard",
    "https://site.api.espn.com/apis/site/v2/sports/volleyball/womens-college-volleyball/scoreboard",
    "https://site.api.espn.com/apis/site/v2/sports/wrestling/college-wrestling/scoreboard"
  ];

  for (const sport of sports) {
    const scores = await loadSport(sport, "Oklahoma");
    tickerItems.push(...scores);
  }

  if (tickerItems.length === 0) {
    tickerItems = ["OU scores loading..."];
  }

  document.getElementById("tickerText").textContent =
    tickerItems.join("  ‚Ä¢  ");
}

loadScores();
setInterval(loadScores, 30000);
</script>


  <!-- ========================= -->
  <!-- HEADER                    -->
  <!-- ========================= -->
  <header>
    <h1>eXperience Sports & Entertainment Network</h1>
    <p>Your AI-powered sports channels ‚Äî powered by The Botosphere</p>
  </header>

  <!-- ========================= -->
  <!-- CONTENT                   -->
  <!-- ========================= -->
  <div class="container">
    <h2 style="margin-bottom: 20px;">Available Channels</h2>

    <div class="bot-grid">

      <!-- BOOMER BOT CARD -->
      <div class="bot-card">
        <img src="tbsn-site/assets/BB all sports.png" alt="Boomer Bot" width="200" />
        <h3>Boomer Bot</h3>
        <p>
          Oklahoma Sooners all-sports AI companion.<br>
          Scores ‚Ä¢ Stats ‚Ä¢ Highlights ‚Ä¢ News ‚Ä¢ Analysis ‚Ä¢ Videos
        </p>
        <a href="https://boomerbot.fun" class="btn">Visit Channel</a>
      </div>

    </div>
  </div>

  <!-- ========================= -->
  <!-- FOOTER                    -->
  <!-- ========================= -->
  <footer>
    ¬© <span id="year"></span> eXperience Sports & Entertainment Network ‚Ä¢ Powered by The Botosphere<br>
    <a href="https://thebotosphere.com" target="_blank">Visit The Botosphere</a>
  </footer>

  <script>
    // Auto-update footer year
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>

  <!-- ========================= -->
  <!-- ESPN LIVE SCORE SCRIPT    -->
  <!-- ========================= -->
  <script>
async function fetchESPN(url) {
  try {
    const res = await fetch(url);
    const data = await res.json();
    return data;
  } catch (err) {
    return null;
  }
}

function extractTeamScore(game, teamIndex) {
  try {
    return {
      name: game.competitors[teamIndex].team.shortDisplayName,
      score: game.competitors[teamIndex].score
    };
  } catch {
    return null;
  }
}

async function loadScores() {
  let tickerItems = [];

  // ======= FOOTBALL =======
  const fb = await fetchESPN("https://site.api.espn.com/apis/site/v2/sports/football/college-football/scoreboard");
  if (fb && fb.events) {
    fb.events.forEach(event => {
      if (event.shortName.includes("Oklahoma")) {
        const g = event.competitions[0];
        const t1 = extractTeamScore(g, 0);
        const t2 = extractTeamScore(g, 1);
        tickerItems.push(`üèà ${t1.name} ${t1.score} ‚Äî ${t2.score} ${t2.name}`);
      }
    });
  }

  // ======= MEN'S BASKETBALL =======
  const mbb = await fetchESPN("https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/scoreboard");
  if (mbb && mbb.events) {
    mbb.events.forEach(event => {
      if (event.shortName.includes("Oklahoma")) {
        const g = event.competitions[0];
        const t1 = extractTeamScore(g, 0);
        const t2 = extractTeamScore(g, 1);
        tickerItems.push(`üèÄ ${t1.name} ${t1.score} ‚Äî ${t2.score} ${t2.name}`);
      }
    });
  }

  // ======= SOFTBALL =======
  const sb = await fetchESPN("https://site.api.espn.com/apis/site/v2/sports/softball/college-softball/scoreboard");
  if (sb && sb.events) {
    sb.events.forEach(event => {
      if (event.shortName.includes("Oklahoma")) {
        const g = event.competitions[0];
        const t1 = extractTeamScore(g, 0);
        const t2 = extractTeamScore(g, 1);
        tickerItems.push(`ü•é ${t1.name} ${t1.score} ‚Äî ${t2.score} ${t2.name}`);
      }
    });
  }

  // ======= FINAL ASSEMBLY =======
  if (tickerItems.length === 0) {
    tickerItems = ["No current OU games in progress ‚Äî check back soon!"];
  }

  document.getElementById("tickerText").textContent = tickerItems.join(" ‚Ä¢ ");
}

// Load immediately
loadScores();

// Refresh every 30 seconds
setInterval(loadScores, 30000);
  </script>

</body>
</html>
